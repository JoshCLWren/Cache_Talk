<mxfile host="app.diagrams.net" modified="2021-08-16T16:05:26.724Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.131 Safari/537.36" etag="UgmqA9kz5KxmGrBTd9kL" version="14.9.6" type="github">
  <diagram id="BxVO-csCPTUL5JLBTUse" name="Page-1">
    <mxGraphModel dx="1186" dy="1591" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="850" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="cX71BcSIp_s0DRQYkB6U-1" value="Request 1&lt;br&gt;Oklahoma" style="image;html=1;image=img/lib/clip_art/telecommunication/iPhone_128x128.png" vertex="1" parent="1">
          <mxGeometry x="60" y="-300" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-2" value="" style="shape=image;imageAspect=0;aspect=fixed;verticalLabelPosition=bottom;verticalAlign=top;image=https://upload.wikimedia.org/wikipedia/commons/thumb/8/8a/Fastly_logo.svg/1200px-Fastly_logo.svg.png;" vertex="1" parent="1">
          <mxGeometry x="545.7099999999999" y="10.000000000000007" width="219.29" height="88.13" as="geometry" />
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-5" value="" style="shape=image;imageAspect=0;aspect=fixed;verticalLabelPosition=bottom;verticalAlign=top;image=https://in.thewardro.be/uploads/-/system/project/avatar/1127/cute-happy-funny-studio-microphone-hold-podcast-sign-cartoon-character-illustration-icon-design-isolated_92289-1106.jpeg?width=64;" vertex="1" parent="1">
          <mxGeometry x="73.5" y="580" width="136.5" height="136.5" as="geometry" />
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-6" value="" style="shape=image;imageAspect=0;aspect=fixed;verticalLabelPosition=bottom;verticalAlign=top;image=https://www.zdnet.com/a/hub/i/r/2018/04/19/092cbf81-acac-4f3a-91a1-5a26abc1721f/thumbnail/770x578/5d78c50199e6a9242367b37892be8057/postgresql-logo.png;" vertex="1" parent="1">
          <mxGeometry x="730" y="660" width="146.67" height="110" as="geometry" />
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-7" value="" style="shape=image;imageAspect=0;aspect=fixed;verticalLabelPosition=bottom;verticalAlign=top;image=https://static.javatpoint.com/tutorial/memcached/images/memcached-tutorial.png;" vertex="1" parent="1">
          <mxGeometry x="420.71" y="930" width="125" height="125" as="geometry" />
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-9" value="Request 3&lt;br&gt;London" style="image;html=1;image=img/lib/clip_art/telecommunication/iPhone_128x128.png" vertex="1" parent="1">
          <mxGeometry x="630" y="-280" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-22" value="There&#39;s no Fresh version of Show 1&lt;br&gt;&amp;nbsp;so the request gets sent to origin &lt;br&gt;and the POP now has a fresh &lt;br&gt;version of Show 1 for the next request" style="endArrow=classic;startArrow=classic;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="cX71BcSIp_s0DRQYkB6U-5" target="cX71BcSIp_s0DRQYkB6U-33">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="580" y="320" as="sourcePoint" />
            <mxPoint x="385.90909090909076" y="560" as="targetPoint" />
            <Array as="points">
              <mxPoint x="200" y="420" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-23" value="There&#39;s no Fresh version of Show 1 &lt;br&gt;so the request gets sent to origin &lt;br&gt;but the CDN POP will have a fresh&lt;br&gt;&amp;nbsp;copy for the next close client" style="endArrow=classic;startArrow=classic;html=1;exitX=0.3;exitY=1.025;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.75;entryY=0;entryDx=0;entryDy=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" edge="1" parent="1" source="cX71BcSIp_s0DRQYkB6U-34" target="cX71BcSIp_s0DRQYkB6U-5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="856.5214025245441" y="560" as="sourcePoint" />
            <mxPoint x="630" y="270" as="targetPoint" />
            <Array as="points">
              <mxPoint x="360" y="480" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-28" value="Request 2&lt;br&gt;Texas" style="image;html=1;image=img/lib/clip_art/telecommunication/iPhone_128x128.png" vertex="1" parent="1">
          <mxGeometry x="101.75" y="-80" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-30" value="Third Client requests Podcast Show 1 in London" style="endArrow=classic;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" edge="1" parent="1" source="cX71BcSIp_s0DRQYkB6U-9" target="cX71BcSIp_s0DRQYkB6U-2">
          <mxGeometry x="-0.4248" y="4" width="50" height="50" relative="1" as="geometry">
            <mxPoint x="690" y="440" as="sourcePoint" />
            <mxPoint x="740" y="390" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-33" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="480" y="340" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-34" value="" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;" vertex="1" parent="1">
          <mxGeometry x="690" y="350" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-35" value="Fastly Routes the first and &lt;br&gt;second requests&lt;br&gt;&amp;nbsp;to the same CDN POP&lt;br&gt;&amp;nbsp;to see if it has a fresh&lt;br&gt;&amp;nbsp;version of Show 1" style="endArrow=classic;html=1;entryX=1;entryY=0;entryDx=0;entryDy=0;exitX=0;exitY=1;exitDx=0;exitDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="cX71BcSIp_s0DRQYkB6U-2" target="cX71BcSIp_s0DRQYkB6U-33">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="540" y="550" as="sourcePoint" />
            <mxPoint x="590" y="500" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-36" value="Fastly Routes the Third and fourth&lt;br&gt;request to a different&lt;br&gt;CDN POP that is close&lt;br&gt;to them" style="endArrow=classic;html=1;exitX=0.922;exitY=0.987;exitDx=0;exitDy=0;exitPerimeter=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" edge="1" parent="1" source="cX71BcSIp_s0DRQYkB6U-2" target="cX71BcSIp_s0DRQYkB6U-34">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="540" y="550" as="sourcePoint" />
            <mxPoint x="590" y="500" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-37" value="CDN POP&lt;br&gt;TEXAS" style="text;html=1;resizable=0;autosize=1;align=center;verticalAlign=middle;points=[];fillColor=none;strokeColor=none;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="485" y="365" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-38" value="CDN POP&amp;nbsp;&lt;br&gt;FRANCE" style="text;html=1;resizable=0;autosize=1;align=center;verticalAlign=middle;points=[];fillColor=none;strokeColor=none;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="695" y="375" width="70" height="30" as="geometry" />
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-40" value="The Client is served &lt;br&gt;Show 1 from Origin" style="shape=flexArrow;endArrow=classic;html=1;exitX=0;exitY=0;exitDx=0;exitDy=0;entryX=0;entryY=1;entryDx=0;entryDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="cX71BcSIp_s0DRQYkB6U-5" target="cX71BcSIp_s0DRQYkB6U-1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="550" y="460" as="sourcePoint" />
            <mxPoint x="70" y="120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-41" value="The Client is served Show 1 from the CDN POP" style="shape=flexArrow;endArrow=classic;html=1;exitX=0;exitY=0;exitDx=0;exitDy=0;fillColor=#fff2cc;strokeColor=#d6b656;" edge="1" parent="1" source="cX71BcSIp_s0DRQYkB6U-33" target="cX71BcSIp_s0DRQYkB6U-28">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="550" y="480" as="sourcePoint" />
            <mxPoint x="600" y="430" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-44" value="First Client Requests Podcast Show 1 in Oklahoma" style="endArrow=classic;html=1;entryX=0;entryY=0;entryDx=0;entryDy=0;exitX=1;exitY=0.75;exitDx=0;exitDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="cX71BcSIp_s0DRQYkB6U-1" target="cX71BcSIp_s0DRQYkB6U-2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="550" y="330" as="sourcePoint" />
            <mxPoint x="600" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-45" value="Second Client requests Podcast Show 1 in Oklahoma" style="endArrow=classic;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;fillColor=#ffe6cc;strokeColor=#d79b00;" edge="1" parent="1" source="cX71BcSIp_s0DRQYkB6U-28" target="cX71BcSIp_s0DRQYkB6U-2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="550" y="330" as="sourcePoint" />
            <mxPoint x="600" y="280" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-46" value="For the First request After not finding Show 1 in &lt;br&gt;memcache the api queries the database and updates memcache" style="endArrow=classic;html=1;exitX=-0.02;exitY=0.398;exitDx=0;exitDy=0;exitPerimeter=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="cX71BcSIp_s0DRQYkB6U-6" target="cX71BcSIp_s0DRQYkB6U-5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="570" y="780" as="sourcePoint" />
            <mxPoint x="620" y="730" as="targetPoint" />
            <Array as="points" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-49" value="The API checks if it has &lt;br&gt;Show 1 and updates cache &lt;br&gt;with the db response" style="endArrow=classic;startArrow=classic;html=1;entryX=0;entryY=0;entryDx=0;entryDy=0;fillColor=#f8cecc;strokeColor=#b85450;" edge="1" parent="1" source="cX71BcSIp_s0DRQYkB6U-5" target="cX71BcSIp_s0DRQYkB6U-7">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="530" y="550" as="sourcePoint" />
            <mxPoint x="470" y="760" as="targetPoint" />
            <Array as="points">
              <mxPoint x="340" y="710" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-50" value="For the Third request the API&lt;br&gt;&amp;nbsp;finds a cached response and serves that" style="endArrow=classic;startArrow=classic;html=1;entryX=-0.038;entryY=0.144;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.5;exitY=1;exitDx=0;exitDy=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" edge="1" parent="1" source="cX71BcSIp_s0DRQYkB6U-5" target="cX71BcSIp_s0DRQYkB6U-7">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="320" y="820" as="sourcePoint" />
            <mxPoint x="370" y="770" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-58" value="Request 4&amp;nbsp;&lt;br&gt;CMS from Spain&lt;br&gt;&lt;br&gt;" style="aspect=fixed;pointerEvents=1;shadow=0;dashed=0;html=1;strokeColor=none;labelPosition=center;verticalLabelPosition=bottom;verticalAlign=top;align=center;fillColor=#00188D;shape=mxgraph.azure.computer" vertex="1" parent="1">
          <mxGeometry x="920" y="-170" width="80" height="72" as="geometry" />
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-61" value="Request 3 is served&lt;br&gt;&amp;nbsp;Show 1&lt;br&gt;from origin" style="shape=flexArrow;endArrow=classic;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=1;entryY=1;entryDx=0;entryDy=0;fillColor=#dae8fc;strokeColor=#6c8ebf;" edge="1" parent="1" source="cX71BcSIp_s0DRQYkB6U-5" target="cX71BcSIp_s0DRQYkB6U-9">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="530" y="510" as="sourcePoint" />
            <mxPoint x="840" y="500" as="targetPoint" />
            <Array as="points">
              <mxPoint x="830" y="540" />
              <mxPoint x="1080" y="470" />
              <mxPoint x="1080" y="-120" />
              <mxPoint x="1030" y="-250" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-62" value="Fourt Client&lt;br&gt;request Podcast Show 1&lt;br&gt;in Spain" style="endArrow=classic;html=1;exitX=-0.037;exitY=0.125;exitDx=0;exitDy=0;exitPerimeter=0;fillColor=#d5e8d4;strokeColor=#82b366;" edge="1" parent="1" source="cX71BcSIp_s0DRQYkB6U-58" target="cX71BcSIp_s0DRQYkB6U-2">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="800" y="-15" as="sourcePoint" />
            <mxPoint x="850" y="-65" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-64" value="The Client is served&lt;br&gt;Show 1 from the&amp;nbsp;&lt;br&gt;French CDN POP" style="shape=flexArrow;endArrow=classic;html=1;entryX=-0.037;entryY=0.653;entryDx=0;entryDy=0;entryPerimeter=0;exitX=0.975;exitY=0.338;exitDx=0;exitDy=0;exitPerimeter=0;fillColor=#d5e8d4;strokeColor=#82b366;" edge="1" parent="1" source="cX71BcSIp_s0DRQYkB6U-34" target="cX71BcSIp_s0DRQYkB6U-58">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="758.34" y="350" as="sourcePoint" />
            <mxPoint x="808.34" y="300" as="targetPoint" />
            <Array as="points">
              <mxPoint x="800" y="340" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-65" value="The CMS updates Show 1 which&lt;br&gt;invalidates memcache and all&lt;br&gt;CDN&#39;s with old versions will serve&amp;nbsp;&lt;br&gt;those unitl they expire" style="shape=flexArrow;endArrow=classic;html=1;exitX=0.988;exitY=1.028;exitDx=0;exitDy=0;exitPerimeter=0;entryX=0.993;entryY=0.088;entryDx=0;entryDy=0;entryPerimeter=0;fillColor=#b0e3e6;strokeColor=#0e8088;" edge="1" parent="1" source="cX71BcSIp_s0DRQYkB6U-58" target="cX71BcSIp_s0DRQYkB6U-5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="560" y="280" as="sourcePoint" />
            <mxPoint x="999" y="390" as="targetPoint" />
            <Array as="points">
              <mxPoint x="980" y="450" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-66" value="The API updates Show 1 in the Database" style="shape=flexArrow;endArrow=classic;html=1;entryX=0;entryY=0;entryDx=0;entryDy=0;exitX=0.985;exitY=0.352;exitDx=0;exitDy=0;exitPerimeter=0;fillColor=#b0e3e6;strokeColor=#0e8088;" edge="1" parent="1" source="cX71BcSIp_s0DRQYkB6U-5" target="cX71BcSIp_s0DRQYkB6U-6">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="560" y="670" as="sourcePoint" />
            <mxPoint x="610" y="620" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="cX71BcSIp_s0DRQYkB6U-67" value="The API invalidates the cache for Show 1" style="shape=flexArrow;endArrow=classic;html=1;exitX=0;exitY=1;exitDx=0;exitDy=0;fillColor=#b0e3e6;strokeColor=#0e8088;" edge="1" parent="1" source="cX71BcSIp_s0DRQYkB6U-5">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="560" y="840" as="sourcePoint" />
            <mxPoint x="420" y="1040" as="targetPoint" />
            <Array as="points">
              <mxPoint x="142" y="930" />
            </Array>
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
